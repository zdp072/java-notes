## 索引的常见模型

#### 哈希表
哈希表示一种以key-value存储数据的结构，它的思路是使用一个哈希函数把key换算成一个确定的位置，然后把value放在数组的这个位置上。可以参考HashMap的设计原理。

哈希表这种结构只适合做等值查询，做区间查询的话每次都要全表查询一遍。

#### 有序数组
等值查询和区间查询的效率都很高，但是更新数据时比较麻烦，你往中间插入一个记录就必须要挪动后面所有的记录，成本很高。所以有序数组索引只适合于不经常修改的数据。

#### 搜索树
二叉搜索树的特点是每个节点的左儿子小于父节点，父节点小于右儿子。

树可以有二叉，也可以有多叉。多叉树就是每个节点有多个儿子，儿子之间的大小保证从左到右递增。

为了让查询尽量访问少的数据块，需要把树高度降低，所以我们不应该使用二叉树，而应该使用N叉树。


## InnoDB的索引模型
每一个索引在InnoDB里面对应一棵B+树。
索引分为主键索引和二级索引

#### 主键索引
叶子节点存的是整行数据

#### 普通索引
叶子节点存的是主键的值

#### 基于主键索引和普通索引的查询有什么区别？
- 通过主键索引查询只需要搜索主键ID对应的这棵B+树
- 通过普通索引查询则需要先搜索普通索引树，得到主键ID的值，然后再通过ID索引树搜索一次，这个过程称为回表。

#### 为何不建议使用UUID作为主键？
1. UUID是无序的，每次插入一条新纪录并不是追加操作，每次都可能涉及到挪动其他记录，影响插入性能。
2. UUID太长，而普通索引的叶子节点是主键，这就会导致其叶子节点很长，占用空间变大。

所以，从插入性能和存储空间方面考量，自增主键往往是更合理的选择。